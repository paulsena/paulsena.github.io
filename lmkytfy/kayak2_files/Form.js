R9.extend("fd.hotels",{Form:function(a){R9.fd.Form.call(this,a)}});R9.fd.hotels.Form.prototype=R9.fd.Form.prototype.beget();R9.extend("fd.hotels.Form.prototype",{defaultOptions:{roomsSelector:".r9NumberBox.roomCount, #rooms2",guestsSelector:".r9NumberBox.guestCount",roomsGuestsDropdownSelector:"#roomsGuests, #roomsGuests2",overlayRoomSelector:"#rooms2",overlayGuestsPrefix:"#guests2"},daterangeSelector:"#travel_dates-end-wrapper",vslogPrefix:"hotels/form",msgs:{getGuestsMessage:function(a){return R9.Common.Utils.String.formatChoice("1#1 guest|2#{0} guests",a,a)},getRoomMessage:function(a){return R9.Common.Utils.String.formatChoice("1#1 room|2#{0} rooms",a,a)},getRoomGuestsMinMessage:function(b,a){return R9.Common.Utils.String.formatString("{0} must have at least {1}",b,a)},getRoomGuestsMaxMessage:function(b,a){return R9.Common.Utils.String.formatString("{0} may have a max of {1}",b,a)}},bindLocalHistory:function(){R9.fd.Form.prototype.bindLocalHistory.call(this);var a=jq("#othercity").val();if(a){this.localHistory.setSticky("destination",a)}},roomsChanged:function(){var c=jq(this.defaultOptions.roomsSelector,this.e),a=parseInt(c.val(),10);this.showGuests(a,this.e);var b=parseInt(this.guests,10);if(b<a){this.guests=b=a}else{if(b>a*4){this.guests=b=a*4}}jq(this.defaultOptions.overlayGuestsPrefix).each(function(d,e){if(!isNaN(a)){jq(e+a,this.e).val(b)}})},buildHotelPlannerMaxRoomsURL:function(){var b="www",a="",d=(R9.globals&&R9.globals.locale)?R9.globals.locale:null,c;if(d&&d.lc&&(typeof(d.lc)==="string")&&(d.lc.toLowerCase()!=="en")){b=d.lc.toLowerCase()}if(d&&d.loc&&(typeof(d.loc)==="string")){a=d.loc}c="http://"+b+".hotelplanner.com/GroupForm.cfm?sc=Kayak&City="+encodeURIComponent(jq("#wherebox").val())+"&InDate="+encodeURIComponent(jq("#checkin_date").val())+"&OutDate="+encodeURIComponent(jq("#checkout_date").val())+"&locale="+a;return c},openHotelPlannerMaxRooms:function(){open("/k/redirect/out?url="+encodeURIComponent(this.buildHotelPlannerMaxRoomsURL()))},bindClearDates:function(){jq("#clearDates",this.e).click(jq.proxy(this.clearDates,this))},bindDoublePicker:function(){var b=this;try{if(this.inDate&&this.inDate.length>0){jq("#checkin_date",this.e).val(moment(this.inDate,"MM/DD/YYYY").format(R9.Widgets.DaterangePicker.prototype.options.startInputFormat));jq("#checkout_date",this.e).val(moment(this.outDate,"MM/DD/YYYY").format(R9.Widgets.DaterangePicker.prototype.options.endInputFormat))}}catch(a){}jq("#travel_dates-end-wrapper",b.e).daterangePickerTwoFields({change:function(d,c){b.log("checkout");compare2chk(null,{formName:b.e.name});b.submitPreload(c?"checkin":"checkout")},minRangeDays:1})},bindEvents:function(){R9.fd.Form.prototype.bindEvents.call(this);this.bindClearDates();this.bindDoublePicker();this.bindMoreOptions();this.bindSmartbox();this.bindRoomGuestDropdown();this.bindGuestsChangeEvent();this.bindRoomChangeEvent();this.bindFilterBoxesChange();this.bindChangeEventToNewLocation()},bindRoomGuestDropdown:function(){var a=this;jq(this.defaultOptions.roomsGuestsDropdownSelector,a.e).newDropdownDialog({onInit:function(b){b.element.find(".closeLink").click(function(){b.close()})},onClose:function(c){var d=jq(a.defaultOptions.guestsSelector),b=jq(a.defaultOptions.roomsSelector);if(d.data("tooltip")){d.data("tooltip").removeWidget()}if(b.data("tooltip")){b.data("tooltip").removeWidget()}}})},bindMoreOptions:function(){jq("#moreOptionsLink",self.e).click(function(){if(jq(this).hasClass("lessSearchOptions")){R9.fd.hotels.filters.FdMoreFilters.hideMoreFilters()}else{R9.fd.hotels.filters.FdMoreFilters.showMoreFilters()}})},bindSmartbox:function(){var a=this,d=jq(a.e).get(0),g=R9.config.getInt("ui.hotel.fdSmarty.flareSmartyType",0),c=R9.config.getBoolean("ui.hotel.smarty-history",false);var f=null;if(c){var b=new R9.Common.SmartyHistory.SmartyHotelHistory();f=new R9.Common.SmartyControlGroup.SmartyHotelControlGroup({form:a,locationInput:d.othercity,ctid:d.citycode,lmid:d.lmid,hid:d.hid,nhid:d.nhid,frid:d.frid,rid:d.rid,cid:d.cid,daterangePicker:jq("#travel_dates-end-wrapper",d),rooms:".r9NumberBox.roomCount, #rooms2",guests:".r9NumberBox.guestCount",minStars:d.filterMinStars,priceRange:d.filterPriceRange,rating:d.rating,smartyHistory:function(){return new R9.Common.SmartyHistory.SmartyHotelHistory()}})}jq(d).find("[name=othercity]").r9HotelSmarty({flareSmartyType:(!isNaN(g)&&(g>0))?g:undefined,minWidth:a.smartboxMinWidth,clearItem:function(e){d.citycode.value="";d.hid.value="";d.lmid.value="";d.nhid.value="";d.frid.value="";d.rid.value="";d.cid.value="";a.clearGeocode(arguments);if(a.hasMoreFilters()){a.moreFilters.resetFilters()}},setItem:function(j,e,i){var h=e||{};setTimeout(function(){d.citycode.value=h.id||"";d.hid.value=h.hid||"";d.lmid.value=h.lmid||"";d.frid.value=h.frid||"";d.rid.value=h.rid||"";d.cid.value=h.cid||"";d.nhid.value=h.nhid||"";d.othercity.value=h.str;if(h.id){var k=jq(d).find("#travel_dates");if(!k.daterangePicker("getStartDate")){k.daterangePicker("handleStartClickEvent",k,jq.Event("click"))}else{if(!k.daterangePicker("getEndDate")){k.daterangePicker("handleEndClickEvent",k,jq.Event("click"))}}a.log("location");a.callbackRefreshCmp2(d.citycode);a.submitPreload("location");if(a.hasMoreFilters()){a.moreFilters.updateFilters(h.id,function(){a.bindFilterBoxesChange()})}if(a.isIntentMediaEnabled){a.loadIntentMediaProperties(h.id)}if(a.isSmarterTravelEnabled){a.loadSmarterTravelLocation(h.id)}}else{window.IntentMediaCity=undefined;window.IntentMediaState=undefined;window.IntentMediaCountry=undefined}},1)},afterDone:function(e){if(e.element.val().length){return}a.callbackRefreshCmp2(d.citycode);a.submitPreload("location");a.geocodeAddress(false)},showDropdownWhenEmpty:c,smartyControlGroup:f}).on("blur",function(){a.callbackRefreshCmp2(d.citycode)})},bindFilterBoxesChange:function(){var a=this;jq("#moreFdFilters .r9-dropdown-select",this.e).off("change.vslog").on("change.vslog",function(){a.log("fdfilter/"+jq(this).prop("id")+"/"+encodeURIComponent(jq(this).val()))})},clearDates:function(){var a=this.e;jq("#travel_dates",this.e).daterangePicker("setStartDate",null);jq("#travel_dates",this.e).daterangePicker("setEndDate",null);jq.get("/k/cookie?action=deletemeta&metacookie=STICKY_START_DATE&formtoken="+R9.globals.formtoken);jq.get("/k/cookie?action=deletemeta&metacookie=STICKY_END_DATE&formtoken="+R9.globals.formtoken);return false},isValid:function(){var c=this.getData(),a=null;var b=false;var d=false;jq.each(c,function(e,f){if(e.indexOf("checkin_date")!=-1&&f!=""){b=true}else{if(e.indexOf("checkout_date")!=-1&&f!=""){d=true}}});if(!c.othercity){a=this.missingLocationMessage}else{if(!b){a="Please enter a check-in date."}else{if(!d){a="Please enter a check-out date."}}}return(this.error=a)===null},loadHistory:function(h){this.loadingHistory=true;var a=this,i=a.e,b=this.localHistory.getRecentHistory(),g=b.rooms,f=b.guests;var d=a.localHistory.reduceTravelersObjectToTotal();if(d>0){f=d;g=Math.max(g,Math.ceil(f/4));g=Math.min(g,f)}if(g&&f){jq(this.defaultOptions.roomsSelector).data("r9NumberBox").setValue(g);this.roomsChanged();jq(this.defaultOptions.guestsSelector).data("r9NumberBox").setValue(f);this.guests=f;this.updateRoomGuestsDropdown(g,f)}var c=["filterMinStars","filterPriceRange","rating"];if(this.useLocalHistory&&this.localHistory.wasLastUsedPage){c=c.concat(["othercity","citycode","hid","lmid","nhid","searchType"])}c.forEach(function(j){var e=b[j]||null;if(e){jq(i[j]).val(e)}});if(h){jq(i).submit()}this.loadingHistory=false},loadIntentMediaProperties:function(b,a){jq.ajax({async:!a,dataType:"json",url:"/f/smarty?f=j&lc=en&lc_cc=US&s=16&where=c"+encodeURIComponent(b),success:function(c){if(c&&c.length){window.IntentMediaCity=c[0].cityname?c[0].cityname.split(",")[0]:undefined;window.IntentMediaState=c[0].rc;window.IntentMediaCountry=c[0].cc}else{window.IntentMediaCity=undefined;window.IntentMediaState=undefined;window.IntentMediaCountry=undefined}}})},loadSmarterTravelLocation:function(a){jq.ajax({async:true,dataType:"json",url:"/f/smarty?f=j&lc=en&lc_cc=US&s=16&where=c"+encodeURIComponent(a),success:function(b){if(b&&b.length){jq("#st_location").val(b[0].cityname)}else{jq("#st_location").val("")}}})},loadSettings:function(b){R9.fd.Form.prototype.loadSettings.call(this,b);if(b.guests){this.guests=b.guests}else{if(b.rooms){this.guests=b.rooms}else{this.guests=1}}this.hasAction=!!b.hasAction;this.intentMediaPageId=b.intentMediaPageId||"hfd";this.isIntentMediaEnabled=!!b.isIntentMediaEnabled;this.isSmarterTravelEnabled=!!b.isSmarterTravelEnabled;this.maxPrice=b.maxPrice;this.maxRooms=b.maxRooms;this.minStars=b.minStars;this.missingLocationMessage=b.missingLocationMessage;this.provider=b.provider;this.rooms=b.rooms||1;this.smartboxMinWidth=b.smartboxMinWidth||175;this.smartboxUrl=b.smartboxUrl||jq.fn.smartbox.defaults.smartUrl;this.smartboxTimeout=b.smartboxTimeout||jq.fn.smartbox.defaults.timeout;this.submitOnPost=!!b.submitOnPost;this.triggerRoomsChanged=!!b.triggerRoomsChanged;this.useLast=typeof b.useLast=="undefined"||b.useLast;this.countTriggersHotelPlanner=(!isNaN(b.countTriggersHotelPlanner)&&(b.countTriggersHotelPlanner>=1))?Math.floor(b.countTriggersHotelPlanner):0;this.useLocalHistory=!!b.useLocalHistory;var c=[];for(var a=1;a<=this.maxRooms;a++){c.push(this.defaultOptions.guestsSelectorPrefix+a)}this.allGuestsSelector=c.join(",");if(BrowserConfig.getBoolean("form.date.prefill",true)){this.inDate=b.inDate;this.outDate=b.outDate}},onLoad:function(){R9.fd.Form.prototype.onLoad.call(this);var b=this;if(document.lasttab&&document.lasttab.havesearched.value=="false"&&b.e!=undefined){if(b.e.Search){b.e.Search.disabled=false}if(b.maxPrice){b.e.maxprice.value=b.maxPrice}if(b.minStars){b.e.minstars.value=b.minStars}if(b.provider){b.e.provider.value=b.provider}if(b.rooms){jq(this.defaultOptions.roomsSelector).data("r9NumberBox").setValue(parseInt(b.rooms));if(b.guests){jq(this.defaultOptions.guestsSelector).data("r9NumberBox").setValue(parseInt(b.guests))}}if(!b.hasAction){if(document.lasttab.havesearched.value=="false"){var a=new Date();if(b.e.datelimit){b.e.datelimit.value=(a.getMonth()-0+1)+"/"+a.getDate()+"/"+a.getFullYear()}}if(b.e.rooms&&b.e.rooms.value!=="1"){b.showGuests(b.e.rooms.value,b.e)}}if((typeof(R9.fd.hotels)!=="undefined")&&(typeof(R9.fd.hotels.filters)!=="undefined")){b.moreFilters=new R9.fd.hotels.filters.FdMoreFilters({});if(b.e.citycode){b.moreFilters.updateFilters(b.e.citycode.value,function(){b.bindFilterBoxesChange();if(b.useLast){search=b.localHistory.getRecentHistory();var d=search.filterPriceRange||null;if(d){jq(b.e.filterPriceRange).val(d)}}})}}if(b.useLast){b.loadHistory(false)}}if(R9.globals.isSeo){jq(b.defaultOptions.guestsSelector,b.e).data("r9NumberBox").setValue(b.guests);jq(b.defaultOptions.roomsSelector,b.e).data("r9NumberBox").setValue(b.rooms)}b.showPromo();compare2chk();b.setPriorValue(["#citycode"]);var c=jq(this.defaultOptions.roomsSelector).data("r9NumberBox");if(c&&(typeof(c.getValue)==="function")){this.checkGuestRoomMaxLinkDisplay(parseInt(c.getValue()))}if(typeof R9StartPage!="undefined"){R9LoadFinished=new Date()}if(b.submitOnPost){setTimeout(function(){jq(b.e).submit()},250)}},updateLocalHistory:function(k){var j=this,d=j.e,l={},a=this.localHistory,b=jq(this.daterangeSelector),g=["othercity","citycode","hid","lmid","nhid","searchType"],i=["filterMinStars","filterPriceRange","rating"];R9.fd.Form.prototype.updateLocalHistory.call(this);var c=b.daterangePicker("getStartDate");var f=b.daterangePicker("getEndDate");if(c){l.checkin_date=c.getTime();a.setSticky("depart_date",l.checkin_date)}if(f){l.checkout_date=f.getTime();a.setSticky("return_date",l.checkout_date)}l.rooms="rooms-input" in d?d["rooms-input"].value:d.rooms.value;l.guests="guests-input" in d?d["guests-input"].value:d["guests"+d.rooms.value].value;a.setSticky("guests",l.guests);g.forEach(function(e){if(!(e in d)){return}l[e]=d[e].value});if(jq("#moreFdFilters").is(":visible")){i.forEach(function(e){l[e]=jq(d[e]).val()});if(l.rating){l.filterMinGuestRating=parseInt(d.rating.value,10)*10}}for(var h in l){if(typeof h==="string"){a.set(h,l[h])}}if(k){this.localHistory.pushSearchHistory(l)}},updateRoomGuestsDropdown:function(c,b){var a=this;jq(a.defaultOptions.roomsGuestsDropdownSelector,a.e).data("dropdownDialog").updateLabel(a.msgs.getRoomMessage(c)+", "+a.msgs.getGuestsMessage(b))},checkGuestRoomMaxLinkDisplay:function(c){var b=(this.countTriggersHotelPlanner>0)?this.countTriggersHotelPlanner:0;var a=this;if(!b){return}if((c>=b)&&!jq(".maxGuestsLinkBox").hasClass("maxGuestsLinkBoxOpened")){jq(".maxGuestsLinkBox",a.e).addClass("maxGuestsLinkBoxOpened");jq(".maxGuestsLink",a.e).show().off("click").on("click",jq.proxy(this.openHotelPlannerMaxRooms,this));return}if((c<b)&&jq(".maxGuestsLinkBox").hasClass("maxGuestsLinkBoxOpened")){jq(".maxGuestsLinkBox",a.e).removeClass("maxGuestsLinkBoxOpened");jq(".maxGuestsLink",a.e).hide().off("click")}},onSubmit:function(){R9.fd.Form.prototype.onSubmit.call(this);var n=this,i=n.e;if(!n.isSubmitted){if(window.yaCounter16685854){try{yaCounter16685854.reachGoal("Hotel_Search_Button_Click")}catch(l){}}if(n.isValid()){n.preSubmit();n.preSubmitMore();if(n.isSmarterTravelEnabled&&window.SmarterTravel){window.SmarterTravel.launch()}if(n.isIntentMediaEnabled){var g=jq("#citycode",n.e).val();if(!window.IntentMediaCity&&g){n.loadIntentMediaProperties(g,true)}var b=jq("#travel_dates-end-wrapper",n.e);var c=b.daterangePicker("getStartDate");c=c?moment(c).format("YYYY-MM-DD"):null;var h=b.daterangePicker("getEndDate");h=h?moment(h).format("YYYY-MM-DD"):null;var f=jq(n.defaultOptions.roomsSelector).data("r9NumberBox");var m=jq(n.defaultOptions.guestsSelector).data("r9NumberBox");var d={bb:"Desktop",mb:"Mobile",tb:"Tablet"};window.IntentMediaProperties={page_id:n.intentMediaPageId,travel_date_start:c,travel_date_end:h,adults:m.getValue().toString(),children:"0",travelers:m.getValue().toString(),form_compare_pops:jq("#compareToRow input[name=comparetosite][type=checkbox]:visible:checked",n.e).length.toString(),hotel_area_id:g,hotel_city:window.IntentMediaCity,hotel_country:window.IntentMediaCountry,hotel_rooms:f.getValue().toString(),hotel_state:window.IntentMediaState,site_name:R9.globals.intentMediaSiteName||"KAYAK",site:R9.globals.intentMediaSiteName||"KAYAK",site_language:R9.globals.locale.lc||"en",site_country:R9.globals.locale.lc_cc||"US",site_currency:R9.globals.site_currency||"",device_format_type:d[R9.globals.platform]||"Desktop"};if(window.IntentMedia){try{IntentMedia.Kayak.fillExitUnit()}catch(k){console.log("Got an exception calling IntentMedia.Kayak.fillExitUnit()")}}else{console.log("Intent media took too long to load intent_media_kayak.js")}}if(!i.citycode.value.length&&i.othercity.value!==i.geocoded.value){n.geocodeAddress(true);i.geocoded.value=i.othercity.value;return false}if(i.location.value){n.disableSearchButton();var a=n.generateSearchUrl();if(a!=null){this.navigateToResults(a);return false}return true}}else{var j=jq('<div class="fdSearchError"><div class="liner">'+this.error.replace(/\n/g,"<br />")+"</div></div>");j.r9dialog({hideTitle:true,width:525});jq("body").trigger("form_error",[j,n])}}return false},preSubmit:function(){var f=this.e;var d=jq("[name=rooms]",f).val();var h=jq("[name=guests]",f);var c="guests"+d;var b=jq(c,f).val();jq(h).val(b);if(f.rating){var a=parseInt(f.rating.value)*10;jq(f.filterMinGuestRating).val(a)}var g=f.othercity?f.othercity.value:"";if(f.location&&!f.location.value){f.location.value=g}},preSubmitMore:jq.noop,geocoderLoaded:false,bindGuestsChangeEvent:function(){var a=this;jq(this.defaultOptions.guestsSelector,this.e).NumberBox({min:1,max:32,callback:function(c){var g=jq(a.defaultOptions.guestsSelector,a.e),d=g.data("r9NumberBox"),e=jq(a.defaultOptions.roomsSelector,a.e),b=e.data("r9NumberBox");var f=d.getValue();if(g.data("tooltip")){g.data("tooltip").removeWidget()}if(e.data("tooltip")){e.data("tooltip").removeWidget()}if(f>d.options.max){d.setValue(d.options.max)}else{if(b.getValue()*4<d.getValue()){b.setValue(b.getValue()+1);a.showTip(g,a.msgs.getRoomGuestsMinMessage(a.msgs.getGuestsMessage(f),a.msgs.getRoomMessage(b.getValue())))}else{if(b.getValue()>d.getValue()){b.setValue(d.getValue());a.showTip(g,a.msgs.getRoomGuestsMaxMessage(a.msgs.getGuestsMessage(f),a.msgs.getRoomMessage(b.getValue())))}}}a.updateRoomGuestsDropdown(b.getValue(),d.getValue());a.checkGuestRoomMaxLinkDisplay(b.getValue());a.submitPreload("guests")},validator:false})},bindRoomChangeEvent:function(){var a=this;jq(this.defaultOptions.roomsSelector,this.e).NumberBox({min:1,max:8,callback:function(){var g=jq(a.defaultOptions.guestsSelector,a.e),d=g.data("r9NumberBox"),e=jq(a.defaultOptions.roomsSelector,a.e),c=e.data("r9NumberBox");if(g.data("tooltip")){g.data("tooltip").removeWidget()}if(e.data("tooltip")){e.data("tooltip").removeWidget()}var f=c.getValue();if(f>c.options.max){c.setValue(c.options.max);f=c.options.max}if(d.getValue()<f){d.setValue(f);a.showTip(e,a.msgs.getRoomGuestsMinMessage(a.msgs.getRoomMessage(f),a.msgs.getGuestsMessage(f)))}else{if(d.getValue()>f*4){d.setValue(f*4);a.showTip(e,a.msgs.getRoomGuestsMaxMessage(a.msgs.getRoomMessage(f),a.msgs.getGuestsMessage(f*4)))}}a.updateRoomGuestsDropdown(c.getValue(),d.getValue());a.checkGuestRoomMaxLinkDisplay(c.getValue());a.submitPreload("rooms")},validator:false});var b=this;jq(this.defaultOptions.overlayRoomSelector,this.e).change(function(){b.log("changeroom");b.roomsChanged()})},bindChangeEventToNewLocation:function(){var a=this;jq("#newlocation",this.e).change(function(){a.changeLocation()})},changeLocation:function(){var a=jq("#newlocation",this.e);if(!a.length){return}var b=a.val().split(":");this.e.citycode.value=b.length>1?b[1]:"";if(b.length>3){if(b[2]=="lmid"){this.e.lmid.value=b[3]}else{if(b[2]=="nhid"){this.e.nhid.value=b[3]}else{if(b[2]=="hid"){this.e.hid.value=b[3]}}}}this.e.location.value=b[0];this.e.othercity.value=b[0];this.e.lat.value="";this.e["long"].value="";this.disableSearchButton();this.e.submit()},initGeocoder:function(a){if(R9.Maps.Google.isLoaded()){a();return}R9.Maps.Google.load(a,"hotel-fd")},clearGeocode:function(){jq(this.e).get(0).searchType.value="C";var a=["address","address_nickname","lat","postalcode","location","long","geocoded"];for(var b=0;b<a.length;b++){jq(this.e).get(0)[a[b]].value=""}},addressResult:function(a){this.clearGeocode();this.e.geocoded.value=this.e.othercity.value;var d=(a?a[0]:null);if(!d||!d.formatted_address||d.types[0]!="street_address"){return}if(this.e.location.value.length>0){this.e.othercity.value=d.formatted_address}var g=d.formatted_address.split(", ");var h=g.length;var c=g[h-1];if(d.address_components){for(var f=d.address_components.length-1;f>=0;f--){if(d.address_components[f].types[0]=="country"){c=d.address_components[f].short_name;break}}}else{if(c.length>2){c=c.substring(0,2)}}var b=(c=="US"||c=="CA"?3:2);if(h<b){return}jq(this.e).get(0).searchType.value="A";if(c=="US"||c=="CA"){this.e.location.value=g[h-3]+","+g[h-2].substring(0,2)+","+c;this.e.postalcode.value=g[h-2].substring(3)}else{if(c=="GB"){var k=new RegExp(/.* [0-9]/);if(k.test(g[h-2])){var e=g[h-2].split(" ");var j=e.length;this.e.location.value=e.slice(0,j-2)+",United Kingdom";this.e.postalcode.value=e[j-2]+" "+e[j-1]}else{this.e.location.value=g.slice(h-2,h-1)+",United Kingdom"}}else{this.e.location.value=g.slice(h-b)}}if(h>=b+1){this.e.address.value=g[h-b-1]}if(h>=b+2){this.e.address_nickname.value=g[0]}if(d.geometry&&d.geometry.location){jq(this.e).get(0)["long"].value=d.geometry.location.lng();jq(this.e).get(0)["lat"].value=d.geometry.location.lat()}},submitAddressResult:function(a){this.addressResult(a);this.submitResult()},submitResult:function(){this.disableSearchButton();this.e.submit()},geocodeAddress:function(c){if(this.e.citycode.value.length||this.e.newlocation){return}var a=this.e.othercity.value;var d=a.split(/\W+/);if(d.length>2||a.indexOf(",")>=0){var b=this;this.e.geocoded.value="";this.initGeocoder(function(){var e=new google.maps.Geocoder();e.geocode({address:a},function(g,f){if(f==google.maps.GeocoderStatus.OK){b[c?"submitAddressResult":"addressResult"](g)}})})}else{this.e.geocoded.value=a;if(c){this.submitResult()}}},showGuests:function(b,a){jq(a).find("[id^=guests]").closest(".guestsWrapper").hide();jq("#guests"+b+",#guests2"+b,a).closest(".guestsWrapper").show()},showTip:function(a,b){if(jq(this.defaultOptions.roomsGuestsDropdownSelector,this.e).hasClass("%s-open".format(jq(this.defaultOptions.roomsGuestsDropdownSelector,this.e).data("dropdownDialog").widgetBaseClass))){a.tipTip({position:"right",showImmediately:true,content:b})}},hasMoreFilters:function(){return this.moreFilters!=undefined},fromCacheRefresh:function(){jq("#travel_dates",this.e).daterangePicker("update");R9.fd.Form.prototype.fromCacheRefresh.call(this)}});
